window.addEventListener("message",r=>{try{if(r.data&&r.data.type==="GAME_THEME_CHANGE"){const t=r.data.theme,e="mspa:theme";let a=null;try{a=localStorage.getItem(e)}catch{}(!a||a==="default")&&(document.documentElement.hasAttribute("data-transition")||document.documentElement.setAttribute("data-transition","smooth"),document.documentElement.setAttribute("data-theme",t),console.log("Parent page theme changed to:",t))}}catch{}});(function(){try{let n=function(){try{var c=document.body;if(!c)return;var m=localStorage.getItem("mspa:font-ui")||"system";c.setAttribute("data-font",m)}catch{}};var r=n,t=document.documentElement,e=function(){try{return localStorage.getItem("mspa:theme")||"space"}catch{return"space"}}();e&&e!=="space"?t.setAttribute("data-theme",e):t.removeAttribute("data-theme"),t.hasAttribute("data-transition")||t.setAttribute("data-transition","smooth");var a=function(){try{return localStorage.getItem("mspa:ui:desktop")==="1"}catch{return!1}}();t.setAttribute("data-desktop",a?"1":"0");var o=function(){try{return localStorage.getItem("mspa:nav:keyboard")==="1"}catch{return!1}}();t.setAttribute("data-kbd",o?"1":"0");var s=function(){try{return localStorage.getItem("mspa:text:contrast")==="1"}catch{return!1}}();t.setAttribute("data-contrast",s?"high":"normal");var u=function(){try{return localStorage.getItem("mspa:text-size")||"18"}catch{return"18"}}();t.style.setProperty("--reader-text",String(u)+"px"),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",n):n()}catch{}})();
